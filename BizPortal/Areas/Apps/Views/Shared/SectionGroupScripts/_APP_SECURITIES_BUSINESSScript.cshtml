@using BizPortal.DAL.MongoDB
@using BizPortal.Utils.Helpers
@model FormSectionGroup

<script type="text/javascript" src="@Url.Content("~/Scripts/SingleForm-frontis/helpers/DBD-helper.js")">
</script>

<script type="text/javascript">

    $(document).ready(function (e) {
        window.singleFormHelpers.form.onDraftDataBound(function (data) {
            // TODO: xxx
            updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE();
            updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE();
            updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY();
            updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY();
        });

        function updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE() {
            var APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT]').getIntegerValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH]').getDecimalValue();
            if (APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT != null && APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH != null) {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').setValue(APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT * APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH);
            }
            else {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').setValue(0);
            }
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').trigger('change');
        }

        function updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE() {
            var APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE]').getIntegerValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE]').getDecimalValue();
            if (APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE != null && APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE != null) {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').setValue(APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE * APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE);
            }
            else {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').setValue(0);
            }
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').trigger('change');

            if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').getDecimalValue() > 0) {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_SHARE_TEXT_HIDDEN]').val('true').trigger('change');
            }
            else {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_SHARE_TEXT_HIDDEN]').val('false').trigger('change');
            }
        }

        function updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY() {
            var APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_ORDINARY = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_ORDINARY]').getIntegerValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_ORDINARY = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_ORDINARY]').getDecimalValue();
            if (APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_ORDINARY != null && APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_ORDINARY != null) {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]').setValue(APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_ORDINARY * APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_ORDINARY);
            }
            else {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]').setValue(0);
            }
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]').trigger('change');
        }

        function updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY() {
            var APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE_ORDINARY = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE_ORDINARY]').getIntegerValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE_ORDINARY = $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE_ORDINARY]').getDecimalValue();
            if (APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE_ORDINARY != null && APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE_ORDINARY != null) {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').setValue(APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE_ORDINARY * APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE_ORDINARY);
            }
            else {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').setValue(0);
            }
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').trigger('change');

            if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').getDecimalValue() > 0) {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY_HIDDEN]').val('true').trigger('change');
            }
            else {
                $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY_HIDDEN]').val('false').trigger('change');
            }
        }

        function updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY() {
            var APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE = $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]").getDecimalValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE = $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]").getDecimalValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY = $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]").getDecimalValue();
            var total = APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE + APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE;

            if (total > 0) {
                $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY]").setValue(APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY / total * 100);
            }
            else {
                $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY]").setValue(0);
            }
            $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY]").trigger('blur');
        }

        function updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY() {
            var APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE = $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]").getDecimalValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE = $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]").getDecimalValue();
            var APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY = $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]").getDecimalValue();

            if (APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE + APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE > 0) {
                var total = APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE + APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE;
                $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY]").setValue(APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY / total * 100);
            }
            else {
                $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY]").setValue(0);
            }
            $("input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY]").trigger('blur');
        }

        if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').length > 0) {
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE);
        }

        if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').length > 0) {
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE);
        }

        if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]').length > 0) {
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_ORDINARY]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_ORDINARY]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY);

        }

        if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').length > 0) {
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_AMOUNT_SHARE_ORDINARY]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_VALUE_EACH_SHARE_ORDINARY]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY);
        }

        if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').length > 0 &&
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').length > 0 &&
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]').length > 0) {
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_ORDINARY]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_ORDINARY);
        }

        if ($('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').length > 0 &&
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').length > 0 &&
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').length > 0) {
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY);
            $('input[name=APP_SECURITIES_BUSINESS_INFO_SECTION_TOTAL_VALUE_SHARE_ORDINARY]').change(updateAPP_SECURITIES_BUSINESS_INFO_SECTION_PERCENT_SHARE_ORDINARY);
        }

    });

</script>



